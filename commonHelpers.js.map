{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["// функції для HTTP-запитів\nimport axios from 'axios';\n\nexport default async function getPictures(name, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '42676798-23985956bba61249a12f13dde';\n\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: name,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n  });\n\n  const { data } = await axios.get(`${BASE_URL}?${searchParams}`);\n  return data;\n}\n","// функції для відображення елементів інтерфейсу\nexport default function renderGallery(array, element, loader) {\n  const galleryMarkup = array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\"\n              ><img\n                class=\"gallery-img\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                width=\"360\"\n                height=\"152\"\n            /></a>\n            <ul class=\"data-list\">\n              <li class=\"data-item likes\">\n                <p class=\"data-name\">Likes</p>\n                <p class=\"data-value\">${likes}</p>\n              </li>\n              <li class=\"data-item views\">\n                <p class=\"data-name\">Views</p>\n                <p class=\"data-value\">${views}</p>\n              </li>\n              <li class=\"data-item comments\">\n                <p class=\"data-name\">Comments</p>\n                <p class=\"data-value\">${comments}</p>\n              </li>\n              <li class=\"data-item downloads\">\n                <p class=\"data-name\">Downloads</p>\n                <p class=\"data-value\">${downloads}</p>\n              </li>\n            </ul>\n          </li>\n`\n    )\n    .join('');\n\n  element.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  loader.classList.add('hidden');\n  element.classList.remove('hidden');\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","// imports\n\nimport getPictures from './js/pixabay-api';\nimport renderGallery from './js/render-function';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport errorIcon from './img/error.svg';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn.load-more');\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst perPage = 15;\nlet page;\nlet searchTag;\nlet maxHits;\n\n// search pictures\nsearchForm.addEventListener('submit', handleSearchPictures);\n\nasync function handleSearchPictures(e) {\n  e.preventDefault();\n\n  clearGallery();\n  hideBtnLoadMore();\n\n  const form = e.target;\n  searchTag = form.elements.tag.value.trim();\n\n  if (searchTag === '') {\n    showMessage('Sorry, enter the tag', '#ef4040', errorIcon);\n    return;\n  }\n\n  page = 1;\n\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await getPictures(searchTag, page, perPage);\n    if (hits.length === 0) {\n      hideLoader();\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        '#ef4040',\n        errorIcon\n      );\n      searchForm.reset();\n      return;\n    }\n\n    maxHits = totalHits;\n\n    renderGallery(hits, gallery, loader);\n\n    if (totalHits > perPage) {\n      showBtnLoadMore();\n    }\n\n    lightbox.refresh();\n  } catch (error) {\n    hideLoader();\n\n    showMessage('Oops. Something went wrong', '#ef4040', errorIcon);\n  }\n\n  searchForm.reset();\n}\n\n// event on btn \"load more\"\nbtnLoadMore.addEventListener('click', handleShowMorePictires);\nasync function handleShowMorePictires() {\n  showLoader();\n  page += 1;\n\n  try {\n    const { hits, totalHits } = await getPictures(searchTag, page, perPage);\n    maxHits = totalHits;\n\n    if (page * perPage >= maxHits) {\n      hideBtnLoadMore();\n      showMessage(\n        \"We're sorry, but you've reached the end of search results.\",\n        '#34c6eb'\n      );\n    }\n    hideLoader();\n\n    renderGallery(hits, gallery, loader);\n    lightbox.refresh();\n\n    smoothScrolling();\n  } catch (error) {\n    hideLoader();\n\n    showMessage('Oops. Something went wrong', '#ef4040', errorIcon);\n  }\n}\n\n// ================= functions\n\n// ================= message by iziToast\nfunction showMessage(text, color, icon = '') {\n  iziToast.show({\n    message: text,\n    messageColor: '#fafafb',\n    messageSize: '16px',\n\n    iconUrl: icon,\n\n    position: 'topRight',\n    backgroundColor: color,\n  });\n}\n\n// ================= delete gallery's elements\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  gallery.classList.add('hidden');\n}\n\n// ================= visibility of loader\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\n// ================= visibility of button \"Load more\"\nfunction showBtnLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideBtnLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n\n// ================= smooth scrolling of window after add more gallery's items\nfunction smoothScrolling() {\n  const { height } = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getPictures","name","page","perPage","BASE_URL","API_KEY","searchParams","data","axios","renderGallery","array","element","loader","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorIcon","searchForm","gallery","btnLoadMore","lightbox","SimpleLightbox","searchTag","maxHits","handleSearchPictures","e","clearGallery","hideBtnLoadMore","showMessage","showLoader","hits","totalHits","hideLoader","showBtnLoadMore","handleShowMorePictires","smoothScrolling","text","color","icon","iziToast","height"],"mappings":"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"}